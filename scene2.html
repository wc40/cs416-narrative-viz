<!DOCTYPE html>
<html>
<script src='https://d3js.org/d3.v5.min.js'></script>

<style> 
  circle {fill: lightblue; stroke: black;} 
</style>

<head>
  <h1>Scene 2
  </h1>
</head>

<body onload='init()'>
  <svg width=600 height=600></svg>
    <script>
      async function init() {
      const data = await d3.csv("https://wc40.github.io/cs416-narrative-viz/data1.csv");

      var xlogScale = d3.scaleLog([100,82000],[0,500]).base(10);
      var ylogScale = d3.scaleLog([100,250000],[500,0]).base(10);

      d3.select('svg')
        .append('g')
        .attr('transform', 'translate(50,50)')
        .selectAll('circle')
        .data(data)
        .enter()
        .append('circle')
        .attr('cx', function(d) {return xlogScale(d['income_per_capita']);})
        .attr('cy', function(d) {return ylogScale(d['energy_per_capita']);})
        .attr('r', function(d) {return 3;} );

      d3.select('svg')
        .append('g')
        .attr('transform', 'translate(50,50)')
        .call(
          d3.axisLeft(ylogScale)
          .tickValues([100,500,1000,10000,240000])
          .tickFormat(d3.format("~s"))
        );

      d3.select('svg')
        .append('g')
        .attr('transform', 'translate(50,550)')
        .call(
        d3.axisBottom(xlogScale)
        .tickValues([100,500,1000,10000,80000])
        .tickFormat(d3.format("~s"))
        );
      }
    </script>

    <form action="https://wc40.github.io/cs416-narrative-viz">
      <input type="submit" value="Previous"/>
    </form>

  </body>
</html>