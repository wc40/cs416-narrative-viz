<!DOCTYPE html>
<html>
<script src='https://d3js.org/d3.v5.min.js'></script>

<style> 
  circle {fill: lightblue; stroke: black;} 
</style>

<head>
  <h1>Scene 2
  </h1>
</head>

<body onload='init()'>
  <svg width=600 height=600></svg>
    <script>
      async function init() {
      const data = await d3.csv("https://wc40.github.io/cs416-narrative-viz/data2.csv");

      var xTimeScale =  d3.scaleTime()
        .domain(d3.extent(data, function(d) { return d['year']; }))
        .range([ 0, 500 ]);
      var ylogScale = d3.scaleLog([100,250000],[500,0]).base(10);

      d3.select('svg')
        .append('g')
        .attr('transform', 'translate(50,50)')
        .append("path")
        .data(data)
        .attr("fill", "none")
        .attr("stroke", "steelblue")
        .attr("stroke-width", 1.5)
        .attr("d", d3.line()
          .x(function(d) { return xTimeScale(d['year']); })
          .y(function(d) { return ylogScale(d['energy_per_capita']); })
          )

      d3.select('svg')
        .append('g')
        .attr('transform', 'translate(50,50)')
        .call(
          d3.axisLeft(ylogScale)
          .tickValues([100,500,1000,10000,240000])
          .tickFormat(d3.format("~s"))
        );

      d3.select('svg')
        .append('g')
        .attr('transform', 'translate(50,550)')
        .call(
        d3.axisBottom(xTimeScale));
      }
    </script>

    <form action="https://wc40.github.io/cs416-narrative-viz">
      <input type="submit" value="Previous"/>
    </form>

  </body>
</html>