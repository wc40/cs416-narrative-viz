<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> 
  circle {fill: lightblue; stroke: black;} 
</style>
<body onload='init()'>
  <svg width=1000 height=1000></svg>
    <script>
      async function init() {
      const data = await d3.csv("https://flunky.github.io/cars2017.csv");

      var xlogScale = d3.scaleLog([10,150],[0,900]).base(10);
      var ylogScale = d3.scaleLog([10,150],[900,0]).base(10);
      var tooltip = d3.select('#tooltip');

      d3.select('svg')
        .append('g')
        .attr('transform', 'translate(50,50)')
        .selectAll('circle')
        .data(data)
        .enter()
        .append('circle')
        .attr('cx', function(d) {return xlogScale(d['AverageCityMPG']);})
        .attr('cy', function(d) {return ylogScale(d['AverageHighwayMPG']);})
        .attr('r', function(d) {return 2+ +d['EngineCylinders'];} );

      d3.select('svg')
        .append('g')
        .attr('transform', 'translate(50,50)')
        .call(
          d3.axisLeft(ylogScale)
          .tickValues([10,20,50,100])
          .tickFormat(d3.format("~s"))
        );

      d3.select('svg')
        .append('g')
        .attr('transform', 'translate(50,950)')
        .call(
        d3.axisBottom(xlogScale)
        .tickValues([10,20,50,100])
        .tickFormat(d3.format("~s"))
        );
      }
    </script>
  </body>
</html>


