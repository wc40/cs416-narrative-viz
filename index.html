<html>
<script src='https://wc40.github.io/cs416-narrative-viz/data.csv'></script>
<style> 
  circle {fill: lightblue; stroke: black;} 
</style>
<body onload='init()'>
  <svg width=1000 height=1000></svg>
    <script>
      async function init() {
      const data = await d3.csv("https://wc40.github.io/cs416-narrative-viz/data.csv");

      var xlogScale = d3.scaleLog([100,250000],[0,900]).base(10);
      var ylogScale = d3.scaleLog([100,82000],[900,0]).base(10);

      d3.select('svg')
        .append('g')
        .attr('transform', 'translate(50,50)')
        .selectAll('circle')
        .data(data)
        .enter()
        .append('circle')
        .attr('cx', function(d) {return xlogScale(d['national_income_per_capita']);})
        .attr('cy', function(d) {return ylogScale(d['energy_per_capita']);})
        .attr('r', function(d) {return (1+ +d['population'])/1424929792;} );

      d3.select('svg')
        .append('g')
        .attr('transform', 'translate(50,50)')
        .call(
          d3.axisLeft(ylogScale)
          .tickValues([100,500,1000,10000,80000])
          .tickFormat(d3.format("~s"))
        );

      d3.select('svg')
        .append('g')
        .attr('transform', 'translate(50,950)')
        .call(
        d3.axisBottom(xlogScale)
        .tickValues([100,500,1000,10000,240000])
        .tickFormat(d3.format("~s"))
        );
      }
    </script>
  </body>
</html>


